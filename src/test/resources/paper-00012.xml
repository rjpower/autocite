<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pdf2xml SYSTEM "pdf2xml.dtd">

<pdf2xml>
<page number="1" position="absolute" top="0" left="0" height="676" width="918">
	<fontspec id="0" size="19" family="Times" color="#c4161c"/>
	<fontspec id="1" size="12" family="Times" color="#231f20"/>
	<fontspec id="2" size="14" family="Times" color="#231f20"/>
	<fontspec id="3" size="9" family="Times" color="#c4161c"/>
	<fontspec id="4" size="14" family="Times" color="#000000"/>
	<fontspec id="5" size="15" family="Times" color="#000000"/>
	<fontspec id="6" size="23" family="Times" color="#000000"/>
	<fontspec id="7" size="14" family="Times" color="#000000"/>
	<fontspec id="8" size="12" family="Times" color="#000000"/>
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="383" height="15" font="4">Geosci. Model Dev. Discuss., 4, C1246–C1253, 2011</text>
<text top="56" left="43" width="367" height="15" font="4">www.geosci-model-dev-discuss.net/4/C1246/2011/</text>
<text top="77" left="43" width="347" height="15" font="4">© Author(s) 2011. This work is distributed under</text>
<text top="97" left="43" width="325" height="15" font="4">the Creative Commons Attribute 3.0 License.</text>
<text top="48" left="562" width="101" height="17" font="5"><b>Geoscientiﬁc</b></text>
<text top="66" left="511" width="152" height="17" font="5"><b>Model Development</b></text>
<text top="84" left="568" width="95" height="17" font="5"><b>Discussions</b></text>
<text top="196" left="43" width="613" height="24" font="6"><b>Interactive comment on “ASAMgpu V1.0 – a moist</b></text>
<text top="229" left="43" width="546" height="24" font="6"><b>fully compressible atmospheric model using</b></text>
<text top="261" left="43" width="564" height="24" font="6"><b>graphics processing units (GPUs)” by S. Horn</b></text>
<text top="310" left="43" width="58" height="15" font="7"><b>S. Horn</b></text>
<text top="342" left="43" width="108" height="14" font="8">horn@tropos.de</text>
<text top="372" left="43" width="295" height="14" font="8">Received and published: 27 December 2011</text>
<text top="422" left="43" width="621" height="15" font="4">The author would like to thank the reviewer for raising a lot of important questions and</text>
<text top="442" left="43" width="227" height="15" font="4">will try to answer them in detail:</text>
<text top="471" left="43" width="621" height="15" font="4">Q.1:He did not describe the hardware that was used or it’s performance - where did</text>
<text top="491" left="43" width="327" height="15" font="4">the 10 TFlops peak performance come from?</text>
<text top="520" left="43" width="621" height="15" font="4">A:The used hardware is mentioned only very brieﬂy in the current manuscript version.</text>
<text top="540" left="43" width="621" height="15" font="4">The model runs on several different hardware conﬁgurations. For development smaller</text>
<text top="560" left="43" width="621" height="15" font="4">cases run on an Lenovo W500 equipped with an AMD Mobility Radeon HD 3650. For</text>
<text top="581" left="43" width="621" height="15" font="4">three dimensional larger domains we have two computation server. The motherboard</text>
<text top="601" left="43" width="621" height="15" font="4">we use, provide full wired 16 x PCIe slots for 4 GPUs. The older server is equipped</text>
<text top="636" left="329" width="48" height="15" font="4">C1246</text>
</page>
<page number="2" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="621" height="15" font="4">with two AMD Radeon HD 4870, and the newer one with four AMD Radeon HD 5870.</text>
<text top="56" left="43" width="621" height="15" font="4">The decision for AMD boards was a ﬁnancial one, they provided the highest theoreti-</text>
<text top="77" left="43" width="621" height="15" font="4">cal peak performance at the lowest price. The used CPU is an Intel(R) Xeon(R) CPU</text>
<text top="97" left="43" width="621" height="15" font="4">E5530 with 4 cores, so the 4 GPU threads can be distributed over the available cores.</text>
<text top="117" left="43" width="621" height="15" font="4">The 10 TFlops peak performance is an estimation based on the technical speciﬁcations</text>
<text top="138" left="43" width="621" height="15" font="4">of one AMD Radeon HD 5870 (http://www.amd.com/de/products/desktop/graphics/ati-</text>
<text top="158" left="43" width="621" height="15" font="4">radeon-hd-5000/hd-5870/Pages/ati-radeon-hd-5870-overview.aspx#2). One of these</text>
<text top="178" left="43" width="621" height="15" font="4">GPUs has an theoretical peak performance of 2.7 TFlops, with that four of them should</text>
<text top="199" left="43" width="621" height="15" font="4">be in the range of 10 TFlops. But this is a optimistic value disregarding communication</text>
<text top="219" left="43" width="621" height="15" font="4">cost between GPUs. The theoretical peak performance for the older AMD Radeon HD</text>
<text top="239" left="43" width="621" height="15" font="4">4870 is 1.2 TFLops. The operating system is a standard linux with hardware acceller-</text>
<text top="260" left="43" width="364" height="15" font="4">ated xserver using the proprietary drivers by AMD.</text>
<text top="288" left="43" width="621" height="15" font="4">Q.2:There were no performance numbers, no comparisons to CPU results, or scaling</text>
<text top="309" left="43" width="283" height="15" font="4">numbers for serial and multi-GPU runs.</text>
<text top="338" left="43" width="621" height="15" font="4">A:First comparisons with a similar model (ASAM) running on CPUs (Intel(R) Xeon(R)</text>
<text top="358" left="43" width="621" height="15" font="4">CPU E7 - 4860 @ 2.27GHz) showed an estimated speedup of factor 80. That means</text>
<text top="378" left="43" width="621" height="15" font="4">an experiment on one ATI Radeon HD 4870 is about eighty times faster then the CPU</text>
<text top="399" left="43" width="621" height="15" font="4">version running on one core or two times faster then the CPU version running on 40</text>
<text top="419" left="43" width="621" height="15" font="4">of these cores. But detailed comparisons were not performed yet and are deﬁnitely a</text>
<text top="439" left="43" width="621" height="15" font="4">task for future development. First scaling experiments were done with the DYCOMS-II</text>
<text top="460" left="43" width="621" height="15" font="4">case. The results are shown in Tab.1 in the manuscript and in the plot attached to this</text>
<text top="480" left="43" width="621" height="15" font="4">comment. The bottleneck of this GPU architecture can be identiﬁed there as well, the</text>
<text top="500" left="43" width="621" height="15" font="4">communication through the PCIe bus. That is why for small domains using multiple</text>
<text top="520" left="43" width="342" height="15" font="4">GPUs has no advantages then using one GPU.</text>
<text top="549" left="43" width="307" height="15" font="4">Q.3:What percentage of peak did you get?</text>
<text top="578" left="43" width="621" height="15" font="4">A:This is a tough question, because with the complex model structure including branch-</text>
<text top="598" left="43" width="621" height="15" font="4">ing it is not easy to deﬁne how many ﬂoating point operations were performed during</text>
<text top="636" left="329" width="48" height="15" font="4">C1247</text>
</page>
<page number="3" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="621" height="15" font="4">one or more time steps. But the speed of about eighty times faster than one CPU core</text>
<text top="56" left="43" width="621" height="15" font="4">(with approx. 10-20 GFlops) indicates a performance in the range of 1 TFlop what is</text>
<text top="77" left="43" width="621" height="15" font="4">near the theoretical peak performance of 1.2 TFlops. But this is just an approximation</text>
<text top="97" left="43" width="399" height="15" font="4">and further research is needed to answer this question.</text>
<text top="126" left="43" width="181" height="15" font="4">Q.4:Can it run on CPUs?</text>
<text top="155" left="43" width="621" height="15" font="4">A:Currently it is not possible to run the model on CPUs only. With the migration of GPUs</text>
<text top="175" left="43" width="621" height="15" font="4">into the CPU and the development of many-core architectures it will be necessary</text>
<text top="195" left="43" width="621" height="15" font="4">to provide graphics device drivers for those solutions. Hopefully those will support</text>
<text top="216" left="43" width="438" height="15" font="4">OpenGL what then enables this model to run on such CPUs.</text>
<text top="244" left="43" width="621" height="15" font="4">Q.5:If the author chose OpenGL for portability reasons, did he compare performance</text>
<text top="265" left="43" width="563" height="15" font="4">and accuracy on different platforms? Was it truly portable (no code changes)?</text>
<text top="294" left="43" width="621" height="15" font="4">A:At the beginning of the development, we also tested the model on nVidia platforms.</text>
<text top="314" left="43" width="621" height="15" font="4">There we found a problem with the conservation of symmetry. The origin of the prob-</text>
<text top="334" left="43" width="621" height="15" font="4">lem is located in the order some ﬂoating point operations are performed. This can be</text>
<text top="355" left="43" width="621" height="15" font="4">reproduced on CPUs as well. On the AMD boards this issue could be solved by rewrit-</text>
<text top="375" left="43" width="621" height="15" font="4">ing the terms and changing the execution order using brackets. On nVidia this rewriting</text>
<text top="395" left="43" width="621" height="15" font="4">did not show the desired effect. Our current theory about that is that nVidia did some</text>
<text top="416" left="43" width="621" height="15" font="4">stronger optimizations on the shader code before compiling. Newer GLSL Versions</text>
<text top="436" left="43" width="621" height="15" font="4">include compiler ﬂags to control the degree of optimization so it should be possible to</text>
<text top="456" left="43" width="621" height="15" font="4">solve the problem there as well. At the moment the code still needs minor changes to</text>
<text top="477" left="43" width="621" height="15" font="4">be run on nVidia. For example the value reported for the number of available texture</text>
<text top="497" left="43" width="621" height="15" font="4">devices is interpreted differently by the nVidia and AMD drivers, because they seem to</text>
<text top="517" left="43" width="621" height="15" font="4">have different deﬁnitions of what a &#34;texture device&#34; is. That causes some issues with</text>
<text top="538" left="43" width="621" height="15" font="4">memory allocation for the texture pointers for the input/output buffers, but can be easy</text>
<text top="558" left="43" width="480" height="15" font="4">solved by manual deﬁning the number of available texture devices.</text>
<text top="587" left="43" width="613" height="15" font="4">Q.6:There are no indications of communications costs in the multi-GPU environment.</text>
<text top="636" left="329" width="48" height="15" font="4">C1248</text>
</page>
<page number="4" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="621" height="15" font="4">A: The cost of communication can be observed in Tab.1 in the manuscript and is also</text>
<text top="56" left="43" width="621" height="15" font="4">mentioned in the text, but I agree this is a very important point that should be stated out</text>
<text top="77" left="43" width="621" height="15" font="4">more strongly. This question is directly connected to a Figure requested by reviewer 1,</text>
<text top="97" left="43" width="621" height="15" font="4">a plot for the very ﬁrst scaling experiments (Fig.1, attached to this comment). The ﬁrst</text>
<text top="117" left="43" width="621" height="15" font="4">impression is, that for smaller domains which ﬁt into the memory of one GPU, only small</text>
<text top="138" left="43" width="621" height="15" font="4">speedup is possible using two GPUs, most of the time is used for communication be-</text>
<text top="158" left="43" width="621" height="15" font="4">tween the GPUs. I think we have some space for optimization there. For larger domains</text>
<text top="178" left="43" width="621" height="15" font="4">more GPUs are necessary because of the restricted amount of on-board memory. And</text>
<text top="199" left="43" width="621" height="15" font="4">it is hard to extrapolate scaling behavior from such small numbers of blocks, because</text>
<text top="219" left="43" width="621" height="15" font="4">with higher numbers of GPU threads and CPU nodes, more and more communication</text>
<text top="239" left="43" width="621" height="15" font="4">can happen independently from other blocks and simultaneously. So for systems with</text>
<text top="260" left="43" width="621" height="15" font="4">more than nine GPUs communication overhead is expected to not increase with do-</text>
<text top="280" left="43" width="621" height="15" font="4">main size (except perhaps due data collisions in the connecting network). So there is</text>
<text top="300" left="43" width="621" height="15" font="4">a lot of future work that has to be done during the further development of this model</text>
<text top="321" left="43" width="73" height="15" font="4">approach.</text>
<text top="349" left="43" width="621" height="15" font="4">Q.7:The parallelization strategy was vague with little discussion of the code design,</text>
<text top="370" left="43" width="184" height="15" font="4">efﬁciency, readability, etc.</text>
<text top="399" left="43" width="621" height="15" font="4">A: There are two different levels of parallelization in this model approach. The ﬁrst one</text>
<text top="419" left="43" width="621" height="15" font="4">is a ﬁne grained parallelization done by the GPU which is transparent to the developer.</text>
<text top="439" left="43" width="621" height="15" font="4">This is done by the device driver that splits the textures/buffers into a large number</text>
<text top="460" left="43" width="621" height="15" font="4">of blocks each processed by one stream processor individually. In contrast to CUDA</text>
<text top="480" left="43" width="621" height="15" font="4">where the developer can deﬁne the number of threads and block sizes used, in OpenGL</text>
<text top="500" left="43" width="621" height="15" font="4">the developer has no inﬂuence on this aspect of parallelization. To use more then one</text>
<text top="520" left="43" width="621" height="15" font="4">GPU the second level of parallelization has to be implemented. This is done using</text>
<text top="541" left="43" width="621" height="15" font="4">the MPICH2 library. At the current state for every GPU one thread is created with it’s</text>
<text top="561" left="43" width="621" height="15" font="4">own OpenGL context. These threads communicate with each other using MPI_Send</text>
<text top="581" left="43" width="621" height="15" font="4">and MPI_Recv functions. Therefore a static connection between those threads is es-</text>
<text top="602" left="43" width="621" height="15" font="4">tablished. The model is parallelized using domain decomposition. That means the</text>
<text top="636" left="329" width="48" height="15" font="4">C1249</text>
</page>
<page number="5" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="621" height="15" font="4">domain is splitted in two or more large blocks handled by one GPU each. Therefor it</text>
<text top="56" left="43" width="621" height="15" font="4">requires one data exchange per acoustic wave time step at the boundaries between</text>
<text top="77" left="43" width="621" height="15" font="4">two blocks. This includes copying the necessary data from GPU memory to main mem-</text>
<text top="97" left="43" width="621" height="15" font="4">ory, send them to the destination block, and uploading to the on-board memory of the</text>
<text top="117" left="43" width="621" height="15" font="4">destination GPU and vice versa. Those data transfers are asynchronous calls, so one</text>
<text top="138" left="43" width="621" height="15" font="4">thread could send data over MPI-functions to a second thread while copying data from</text>
<text top="158" left="43" width="621" height="15" font="4">the GPU to main memory for a third thread. The code written in C++ and structured</text>
<text top="178" left="43" width="621" height="15" font="4">in different classes, mainly shader, texture and transporter class. The source and des-</text>
<text top="199" left="43" width="621" height="15" font="4">tination textures are connected with the shader using pointers. A single function call</text>
<text top="219" left="43" width="621" height="15" font="4">initiates the computation on the GPU for the complete texture set. The computation</text>
<text top="239" left="43" width="621" height="15" font="4">may be a single operation per element but hence every shader call invokes a CPU</text>
<text top="260" left="43" width="621" height="15" font="4">function call, it is recommended to perform as much operations per shader call as pos-</text>
<text top="280" left="43" width="621" height="15" font="4">sible. For example all sinks and sources for momentum (like pressure, gravity, viscosity,</text>
<text top="300" left="43" width="621" height="15" font="4">divergence damping, friction and damping layers) can be handled in one shader. The</text>
<text top="321" left="43" width="621" height="15" font="4">transporter class encapsulates the MPI functions and transfer functions between GPU</text>
<text top="341" left="43" width="621" height="15" font="4">and main memory. The class structures, the pointers for data ﬂow and the transparent</text>
<text top="361" left="43" width="348" height="15" font="4">ﬁne grain parallelization lead to good readability.</text>
<text top="390" left="43" width="621" height="15" font="4">Q.8:There are no references indicating the author knows about other GPU paralleliza-</text>
<text top="410" left="43" width="621" height="15" font="4">tion efforts for weather and climate models. There is good work being done in the</text>
<text top="431" left="43" width="82" height="15" font="4">community.</text>
<text top="460" left="43" width="621" height="15" font="4">A: Deﬁnitely there were a lot of good work done in this ﬁeld. For example in the weather</text>
<text top="480" left="43" width="621" height="15" font="4">research forecast model (WRF) several parts of the model like the microphysical pa-</text>
<text top="500" left="43" width="621" height="15" font="4">rameterization, passive tracer advection and the chemical solver were migrated to the</text>
<text top="520" left="43" width="621" height="15" font="4">GPU [Michalakes, 2008]. If parts of a complex model are migrated to GPUs, prob-</text>
<text top="541" left="43" width="621" height="15" font="4">lems with high data transfer costs are documented, limiting possible speedups. There</text>
<text top="561" left="43" width="621" height="15" font="4">is also the model GALES [Schalkwijk, 2012] with a similar approach to the work pre-</text>
<text top="581" left="43" width="621" height="15" font="4">sented here, a model running completely on the GPU with great interaction possibilities</text>
<text top="602" left="43" width="621" height="15" font="4">written using CUDA. Those references will be added in the introduction in a revised</text>
<text top="636" left="329" width="48" height="15" font="4">C1250</text>
</page>
<page number="6" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="85" height="15" font="4">manuscript.</text>
<text top="65" left="43" width="621" height="15" font="4">Q.9:There were also no references to CUDA, OpenCL, GPU compilers, or an indication</text>
<text top="85" left="43" width="621" height="15" font="4">why OpenGL was chosen. Was it because the author was using an older GPU which</text>
<text top="106" left="43" width="264" height="15" font="4">did not support the HPC languages?</text>
<text top="134" left="43" width="621" height="15" font="4">A:The main reason for OpenGL was the already mentioned platform independence.</text>
<text top="155" left="43" width="621" height="15" font="4">It is an established widely supported open standard. When the development of this</text>
<text top="175" left="43" width="621" height="15" font="4">model started, 4 years ago, OpenCL was not supported very well yet, meanwhile this</text>
<text top="195" left="43" width="621" height="15" font="4">could be an alternative and migration from GLSL to OpenCL should be possible with</text>
<text top="216" left="43" width="621" height="15" font="4">relative low effort. Another nice side effect is the transparency of the ﬁne grain paral-</text>
<text top="236" left="43" width="621" height="15" font="4">lelization which allows developers to concentrate on model physics and numerics. Last</text>
<text top="256" left="43" width="621" height="15" font="4">but not least OpenGL as a graphics library can be used for visualization and render-</text>
<text top="277" left="43" width="621" height="15" font="4">ing, reducing the amount of data that has to be saved on hard disk to produce high</text>
<text top="297" left="43" width="159" height="15" font="4">resolution animations.</text>
<text top="326" left="43" width="621" height="15" font="4">Q.10:The scientiﬁc research seems promising though I am not a meteorologist so it’s</text>
<text top="346" left="43" width="621" height="15" font="4">hard to evaluate merit. However, the scope seems limited to success running some</text>
<text top="366" left="43" width="621" height="15" font="4">idealized test cases. Is there a CPU version of the model so results can be evaluated?</text>
<text top="387" left="43" width="621" height="15" font="4">If not, can it be evaluated to other models of similar scale? When will real data be</text>
<text top="407" left="43" width="45" height="15" font="4">used?</text>
<text top="436" left="43" width="621" height="15" font="4">A:The author presented mainly idealized test cases because those can be compared</text>
<text top="456" left="43" width="621" height="15" font="4">to simulations by other workgroups and can be used to evaluate the model results.</text>
<text top="477" left="43" width="621" height="15" font="4">The model is still far away from current real weather forecast models like WRF. The</text>
<text top="497" left="43" width="621" height="15" font="4">next important steps on this way would be the implementation of orographic struc-</text>
<text top="517" left="43" width="621" height="15" font="4">tures, a soil and vegetation model and a radiation code. Nevertheless, there were</text>
<text top="538" left="43" width="621" height="15" font="4">some experiments using more or less real boundary condition data. One example</text>
<text top="558" left="43" width="621" height="15" font="4">is the simulation of the heat island effect of Cap Verde Island with comparison to</text>
<text top="578" left="43" width="621" height="15" font="4">doppler lidar data (Engelmann et al. 2011) or a still experimental simulation of a su-</text>
<text top="598" left="43" width="621" height="15" font="4">percell (http://www.youtube.com/watch?v=bJqdQe2HVqI). Also different stratocumulus</text>
<text top="636" left="329" width="48" height="15" font="4">C1251</text>
</page>
<page number="7" position="absolute" top="0" left="0" height="676" width="918">
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="36" left="43" width="621" height="15" font="4">and cumulus cloud cases based on real data (BOMEX, RICO, DYCOMS) from the</text>
<text top="56" left="43" width="621" height="15" font="4">GEWEX Cloud System Study (GCSS) were successfully simulated but not published</text>
<text top="77" left="43" width="26" height="15" font="4">yet.</text>
<text top="106" left="43" width="621" height="15" font="4">Q.11:The author also did not research other scientiﬁc efforts to develop and run non</text>
<text top="126" left="43" width="621" height="15" font="4">hydrostatic models of this type. There are plenty of models already developed that</text>
<text top="146" left="43" width="621" height="15" font="4">are at the scale indicated and years of work have been done in this area - so again,</text>
<text top="166" left="43" width="621" height="15" font="4">the scientiﬁc content does not appear new or innovative. While this topic is of great</text>
<text top="187" left="43" width="621" height="15" font="4">interest to the community, I cannot see any beneﬁt to publishing this paper without</text>
<text top="207" left="43" width="114" height="15" font="4">major revisions.</text>
<text top="236" left="43" width="621" height="15" font="4">A:There are some good points that all together make this model something new. The</text>
<text top="256" left="43" width="621" height="15" font="4">ﬁrst one is that the model calculations are completely done on the GPU. The second</text>
<text top="277" left="43" width="621" height="15" font="4">is it can use several GPUs in parallel. And the third one is OpenGL, allowing the</text>
<text top="297" left="43" width="396" height="15" font="4">community to use whatever graphics platform they like.</text>
<text top="326" left="43" width="81" height="15" font="4">references:</text>
<text top="355" left="43" width="621" height="15" font="4">Engelmann, R., Ansmann, A., Horn, S., Seifert, P., Althausen, D., Tesche, M., Essel-</text>
<text top="375" left="43" width="621" height="15" font="4">born, M., Fruntke, J., Lieke, K., Freudenthaler, V., and Gross, S.: Doppler lidar studies</text>
<text top="395" left="43" width="621" height="15" font="4">of heat island effects on vertical mixing of aerosols during SAMUM2, Tellus B, 63,</text>
<text top="416" left="43" width="152" height="15" font="4">448-458, 2011. 2652</text>
<text top="444" left="43" width="621" height="15" font="4">Michalakes, J. and M. Vachharajani, “GPU Acceleration of Numerical Weather Predic-</text>
<text top="465" left="43" width="621" height="15" font="4">tion”, Parallel Processing Letters Vol. 18 No. 4. World Scientiﬁc. Dec. 2008. pp.</text>
<text top="485" left="43" width="45" height="15" font="4">531â ˘</text>
<text top="485" left="79" width="17" height="15" font="4">Aˇ</text>
<text top="485" left="88" width="42" height="15" font="4">T548,</text>
<text top="514" left="43" width="621" height="15" font="4">J. Schalkwijk; Grifﬁth, E.; Post, F; and Jonker, H.J.J.; High performance simulations</text>
<text top="534" left="43" width="621" height="15" font="4">of turbulent clouds on a desktop PC: exploiting the GPU, Bulletin of the American</text>
<text top="555" left="43" width="281" height="15" font="4">Meteorological Society, 2012 (in press)</text>
<text top="597" left="43" width="454" height="14" font="8">Interactive comment on Geosci. Model Dev. Discuss., 4, 2635, 2011.</text>
<text top="636" left="329" width="48" height="15" font="4">C1252</text>
</page>
<page number="8" position="absolute" top="0" left="0" height="676" width="918">
	<fontspec id="9" size="4" family="Times" color="#000000"/>
	<fontspec id="10" size="3" family="Times" color="#000000"/>
	<fontspec id="11" size="3" family="Times" color="#000000"/>
	<fontspec id="12" size="5" family="Times" color="#000000"/>
	<fontspec id="13" size="12" family="Times" color="#000000"/>
<text top="50" left="779" width="66" height="20" font="0"><a href="http://www.geosci-model-dev-discuss.net"><b>GMDD</b></a></text>
<text top="84" left="735" width="155" height="14" font="1">4, C1246–C1253, 2011</text>
<text top="141" left="775" width="75" height="15" font="2">Interactive</text>
<text top="161" left="777" width="71" height="15" font="2">Comment</text>
<text top="462" left="767" width="90" height="11" font="3"><a href="">Full Screen / Esc</a></text>
<text top="501" left="751" width="121" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/C1246/2011/gmdd-4-C1246-2011-print.pdf">Printer-friendly Version</a></text>
<text top="539" left="754" width="116" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011-discussion.html">Interactive Discussion</a></text>
<text top="578" left="766" width="93" height="11" font="3"><a href="http://www.geosci-model-dev-discuss.net/4/2635/2011/gmdd-4-2635-2011.pdf">Discussion Paper</a></text>
<text top="240" left="245" width="3" height="7" font="9">0</text>
<text top="240" left="275" width="22" height="7" font="9">5000000</text>
<text top="240" left="313" width="25" height="7" font="9">10000000</text>
<text top="240" left="353" width="25" height="7" font="9">15000000</text>
<text top="240" left="393" width="25" height="7" font="9">20000000</text>
<text top="240" left="432" width="25" height="7" font="9">25000000</text>
<text top="232" left="239" width="3" height="7" font="9">0</text>
<text top="210" left="226" width="16" height="7" font="9">50000</text>
<text top="188" left="223" width="19" height="7" font="9">100000</text>
<text top="166" left="223" width="19" height="7" font="9">150000</text>
<text top="144" left="223" width="19" height="7" font="9">200000</text>
<text top="122" left="223" width="19" height="7" font="9">250000</text>
<text top="99" left="223" width="19" height="7" font="9">300000</text>
<text top="162" left="462" width="18" height="7" font="9">1 GPU</text>
<text top="170" left="462" width="21" height="7" font="9">2 GPUs</text>
<text top="178" left="462" width="21" height="7" font="9">4 GPUs</text>
<text top="252" left="316" width="47" height="6" font="10">number of gridcells</text>
<text top="191" left="214" width="0" height="6" font="11">ca</text>
<text top="185" left="214" width="0" height="6" font="11">lc</text>
<text top="181" left="214" width="0" height="6" font="11">u</text>
<text top="178" left="214" width="0" height="6" font="11">la</text>
<text top="174" left="214" width="0" height="6" font="11">tio</text>
<text top="168" left="214" width="0" height="6" font="11">n</text>
<text top="165" left="214" width="0" height="6" font="11"> ti</text>
<text top="161" left="214" width="0" height="6" font="11">m</text>
<text top="156" left="214" width="0" height="6" font="11">e</text>
<text top="152" left="214" width="0" height="6" font="11"> [s</text>
<text top="147" left="214" width="0" height="6" font="11">]</text>
<text top="84" left="295" width="85" height="8" font="12">first results scaling experiments </text>
<text top="590" left="43" width="43" height="14" font="13"><b>Fig. 1.</b></text>
<text top="636" left="329" width="48" height="15" font="4">C1253</text>
</page>
</pdf2xml>
